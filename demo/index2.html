<!doctype html>

<html>
  
  <head>
    <meta charset="utf-8">
    <title>CreateReadUpdateDelete.js demo page</title>
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      @media(max-width: 980px) {
        /* Enable use of floated navbar text */
        .navbar-text.pull-right {
          float: none;
          padding-left: 5px;
          padding-right: 5px;
        }
      }
    </style>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css">

  </head>
  
  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">CreateReadUpdateDelete.js</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active">
                <a href="http://schizoduckie.github.io/CreateReadUpdateDelete.js/">Home</a>
              </li>
              <li>
                <a href="http://github.com/SchizoDuckie/CreateReadUpdateDelete.js/">Source</a>
              </li>
            </ul>
          </div>
          <!--/.nav-collapse -->
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
            <li class='nav-header'><h3>Loaded entities</h3></li>
              <li class="nav-header">Presentations</li>
              <li id="presentations">
              
              </li>
              <li class="nav-header">Slides</li>
              <li id='slides'>
                
              </li>
              <li class="nav-header">Entities</li>
              <li id='entities'>
                
              </li>
            </ul>
          </div>
          <!--/.well -->
        </div>
        <!--/span-->
        <div class="span9">
          <div class="hero-unit">
            <h1>CreateReadUpdateDelete.js demo</h1>
            <p>This demo page shows how a new database is created and fixtures for entities are inserted before the rest of the code is executed. Press F12 in your browser to show the full console log. For demo purposes, this page creates a new demo database every time you reload this page.</p>
            <p></p>

          </div>
          <h2>The Code</h2>
              <p>The main code that kicks off this process:</p>
              <code style='white-space:pre-wrap; display:block'>
CRUD.setAdapter(new CRUD.SQLiteAdapter('crudjsdemo'+new Date().getTime())).then(function() {
	CRUD.Find(Presentation, { ID: 1 }).then(function(result) {
		var presEl = document.getElementById('presentations')
		for (var i=0; i&lt; result.length; i++) {
			presEl.innerHTML += result[i].get('name')+'&lt;br&gt;';
			result[i].display();
		}
	})
});
				})
			   </code>
          <div class="row-fluid">
            <div class="span4" >
              <h2 id='presentationTitle1'>I will be filled</h2>
              <p id='presentation1'>This content will be replaced with a demo presentation's content as soon as the fixtures are inserted..</p>
             </div>
            <!--/span-->
            <div class="span4">
              <h2 id='presentationTitle2'>I will be filled too</h2>
              <p id='presentation2'>This text is just a placeholder. It will be removed as soon as you press the button below. The button below executes the following code: <code style='white-space:pre-wrap; display:block'>CRUD.Find(Presentation, { ID: 2}).then(function(pres) { pres[0].display("presentation2"); });'</code></p>

              <a class="btn btn-success" onclick='CRUD.Find(Presentation, { ID: 2}).then(function(pres) { pres[0].display("presentation2"); });'>Fill me </a>
            </div>
            <!--/span-->
            <div class="span4" style='min-height: 100px'>
               <h2>Check out the source</h2>
               <p>Current work with PromiseJS support is in the ipromise branch</p>
              <p><a class="btn btn-info" href="https://github.com/SchizoDuckie/CreateReadUpdateDelete.js/tree/ipromise" target='_blank'>View details on github &raquo;</a></p>
            </div>
            <!--/span-->
          </div>
          <!--/row-->
          <div class="row-fluid">
            <div class="span4" id='code'>
              <p></p>
            </div>
            <!--/span-->
            <div class="span8" id='log' style='font-family: courier; white-space:pre;'>
              
            </div>
            <!--/span-->
            <!--/span-->
          </div>
          <!--/row-->
        </div>
        <!--/span-->
      </div>
      <!--/row-->
      <hr>
      <footer>
        <p>&copy; SchizoDuckie 2013</p>
      </footer>
    </div>
    <!--/.fluid-container-->
    <script src="../promise-3.2.0.js"></script>
	<script src='../CRUD.js'></script>
	<script src='../CRUD.IndexedDBAdapter.js'></script>
	<script src='../CRUD.QueryBuilder.js'></script>
	<script src='../CRUD.database.js'></script>

	<script src='slide.js'></script>
	<script src='presentation.js'></script>
	<script src='presentationslide.js'></script>

	<script>

	window.onload = function() {
		CRUD.setAdapter(new CRUD.IndexedDBAdapter('crudjsdemo'+new Date().getTime())).then(function() {

			CRUD.Find(Presentation, { ID: 1 }).then(function(result) {
				for (var i=0; i< result.length; i++) {
					result[i].display();
				}
			})

			var entityEl = document.getElementById('entities');

			for(var i in CRUD.EntityManager.entities) {
				entityEl.innerHTML += "<a href='"+i.toLowerCase()+".js' target='_blank'>"+i+'</a><br>';
			}

		})

	}
	</script>
  </body>

</html>

</body>
</html>